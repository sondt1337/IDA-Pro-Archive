<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IDA SDK: macro_constructor_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IDA SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmacro__constructor__t-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">macro_constructor_t Struct Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Helper class for processor modules to build macro instructions.  
 <a href="structmacro__constructor__t.html#details">More...</a></p>

<p><code>#include &lt;ua.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0496edd75a43b5048d83ef833c1b4d9"><td class="memItemLeft" align="right" valign="top">virtual bool idaapi&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmacro__constructor__t.html#af0496edd75a43b5048d83ef833c1b4d9">build_macro</a> (<a class="el" href="classinsn__t.html">insn_t</a> *insn, bool may_go_forward)=0</td></tr>
<tr class="memdesc:af0496edd75a43b5048d83ef833c1b4d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to extend the instruction.  <a href="structmacro__constructor__t.html#af0496edd75a43b5048d83ef833c1b4d9">More...</a><br /></td></tr>
<tr class="separator:af0496edd75a43b5048d83ef833c1b4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Address translation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p >The following functions can be used by processor modules to map addresses from one region to another.</p>
<p >They are especially useful for microprocessors that map the same memory region to multiple address ranges or use memory bank switching. The user can use the following techniques to desribe address translations:</p><ul>
<li>some processors support the segment transation feature. the user can specify the mapping in Edit, Segments, Change segment translation</li>
<li>the user can specify mapping for an individual direct call instruction by specifying it as an offset (Edit, Operand types, Offset)</li>
<li>specify the value of the data segment virtual register (ds). it will be used to calculate data addresses </li>
</ul>
</div></td></tr>
<tr class="memitem:a61bfbf600211445fc5e82b7ae7369f53"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmacro__constructor__t.html#a61bfbf600211445fc5e82b7ae7369f53">construct_macro</a> (<a class="el" href="classinsn__t.html">insn_t</a> *insn, bool enable)</td></tr>
<tr class="memdesc:a61bfbf600211445fc5e82b7ae7369f53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a macro instruction.  <a href="structmacro__constructor__t.html#a61bfbf600211445fc5e82b7ae7369f53">More...</a><br /></td></tr>
<tr class="separator:a61bfbf600211445fc5e82b7ae7369f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a501b71b2fb6917e7cef2791932e8b364"><td class="memItemLeft" align="right" valign="top"><a id="a501b71b2fb6917e7cef2791932e8b364" name="a501b71b2fb6917e7cef2791932e8b364"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>reserved</b> = 0</td></tr>
<tr class="separator:a501b71b2fb6917e7cef2791932e8b364"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Helper class for processor modules to build macro instructions. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a61bfbf600211445fc5e82b7ae7369f53" name="a61bfbf600211445fc5e82b7ae7369f53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bfbf600211445fc5e82b7ae7369f53">&#9670;&nbsp;</a></span>construct_macro()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool macro_constructor_t::construct_macro </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinsn__t.html">insn_t</a> *&#160;</td>
          <td class="paramname"><em>insn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a macro instruction. </p>
<p >This function may be called from ana() to generate a macro instruction.</p>
<p >The real work is done by the '<a class="el" href="structmacro__constructor__t.html#af0496edd75a43b5048d83ef833c1b4d9" title="Try to extend the instruction.">build_macro()</a>' virtual function. It must be defined by the processor module.</p>
<p ><a class="el" href="structmacro__constructor__t.html#a61bfbf600211445fc5e82b7ae7369f53" title="Construct a macro instruction.">construct_macro()</a> modifies the database using the info provided by <a class="el" href="structmacro__constructor__t.html#af0496edd75a43b5048d83ef833c1b4d9" title="Try to extend the instruction.">build_macro()</a>. It verifies if the instruction can really be created (for example, that other items do not hinder), may plan to reanalyze the macro, etc. If the macro instructions are disabled by the user, <a class="el" href="structmacro__constructor__t.html#a61bfbf600211445fc5e82b7ae7369f53" title="Construct a macro instruction.">construct_macro()</a> will destroy the macro instruction. Note: if INSN_MODMAC is not set in insn.flags, the database will not be modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">insn</td><td>the instruction to modify into a macro </td></tr>
    <tr><td class="paramname">enable</td><td>enable macro generation </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>the macro instruction is generated in 'insn' </td></tr>
    <tr><td class="paramname">false</td><td>did not create a macro </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af0496edd75a43b5048d83ef833c1b4d9" name="af0496edd75a43b5048d83ef833c1b4d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0496edd75a43b5048d83ef833c1b4d9">&#9670;&nbsp;</a></span>build_macro()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool idaapi macro_constructor_t::build_macro </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinsn__t.html">insn_t</a> *&#160;</td>
          <td class="paramname"><em>insn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>may_go_forward</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to extend the instruction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">insn</td><td>Instruction to modify, usually the first instruction of the macro </td></tr>
    <tr><td class="paramname">may_go_forward</td><td>Is it ok to consider the next instruction for the macro? This argument may be false, for example, if there is a cross reference to the end of INSN. In this case creating a macro is not desired. However, it may still be useful to perform minor tweaks to the instruction using the information about the surrounding instructions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if created an macro instruction. This function may modify 'insn' and return false; these changes will be accepted by the kernel but the instruction will not be considered as a macro. </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="ua_8hpp.html">ua.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
