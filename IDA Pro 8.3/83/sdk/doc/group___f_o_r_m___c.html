<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IDA SDK: ask_form()/open_form()</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IDA SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ask_form()/open_form()</div></div>
</div><!--header-->
<div class="contents">

<p>This module describes how to generate a custom form.  
</p>
<p >This module describes how to generate a custom form. </p>
<pre>

The following keywords might appear at the beginning of the 'form' argument
(case insensitive):

STARTITEM number

  where number is a number of input field the cursor will stand on.
  By default the cursor is in the first field of the dialog box.
  The input fields are numbered from 0 (the first field is field 0).

BUTTON name caption

  Alternative caption for a button. It may contain the character
  to highlight in this form:  ~Y~es
  Valid button names are: YES, NO, CANCEL
  For example:
      BUTTON YES Please do
      BUTTON NO Nope
      BUTTON CANCEL NONE

  By default the NO button is not displayed. If it is displayed, then
  the return value of the function will be different!
  (see the function description)

  Empty text means that there won't be any corresponding button.
  (you may also use NONE as the caption to hide it)

  A * after the button name means that this button will be the default:

    BUTTON CANCEL* Cancel

Next, if the dialog box is kept in IDA.HLP, the following may appear:
(this defines help context for the whole dialog box)

@hlpMessageName[]

If the form is not in IDA.HLP file, then it can have a built-in
help message. In this case the help screen should be enclosed in the
following keywords:

HELP
....
....
....
ENDHELP

Each keyword should be on a separate line.

Next there must be the title line and two empty lines.
Most of the text in the dialog box text string is copied to the dialog
without modification. There are three special cases:

      - dynamic labels (format parameters)<ul>
<li>callback arguments</li>
<li>input fields

For example, this dialog box:

------ format:
      Sample dialog box


      This is sample dialog box for A
      using address $

      &lt;~E~nter value:N::18::&gt;

------

Contains two dynamic labels (text A and address $) and one input field
(numerical input box with the label "Enter value").

Parameters for the dynamic labels and input fields are taken from the
function's input arguments (va_list). The corresponding argument should
contain a pointer (sic, pointer) to the value to be displayed.

The dialog box above should be called as

              <div class="fragment"><div class="line"><span class="keywordtype">char</span> *<span class="keywordtype">string</span> = <span class="stringliteral">&quot;something&quot;</span>;</div>
<div class="line">ea_t addr = someaddr;</div>
<div class="line"><a class="code hl_typedef" href="pro_8h.html#aef265b11f25357d520dcfd40aa8c18f3">uval_t</a> answer = 0;</div>
<div class="line"><span class="keywordtype">int</span> ok = <a class="code hl_function" href="kernwin_8hpp.html#a56bdea2f1808b588da54c343f42ebf41">ask_form</a>(format, <span class="keywordtype">string</span>, &amp;addr, &amp;answer);</div>
<div class="ttc" id="akernwin_8hpp_html_a56bdea2f1808b588da54c343f42ebf41"><div class="ttname"><a href="kernwin_8hpp.html#a56bdea2f1808b588da54c343f42ebf41">ask_form</a></div><div class="ttdeci">int ask_form(const char *form,...)</div><div class="ttdoc">Display a dialog box and wait for the user.</div><div class="ttdef"><b>Definition:</b> kernwin.hpp:7031</div></div>
<div class="ttc" id="apro_8h_html_aef265b11f25357d520dcfd40aa8c18f3"><div class="ttname"><a href="pro_8h.html#aef265b11f25357d520dcfd40aa8c18f3">uval_t</a></div><div class="ttdeci">asize_t uval_t</div><div class="ttdoc">unsigned value used by the processor.</div><div class="ttdef"><b>Definition:</b> pro.h:442</div></div>
</div><!-- fragment -->


Dynamic labels are used to specify variant parts of the dialog box text.
They use the following syntax:

      nT

where
      n  - optional decimal field ID, which may be used in the
           <a class="el" href="structform__actions__t.html" title="Functions available from formchgcb_t.">form_actions_t</a> calls to get/set label value at runtime
      T  - a character specifying type of input field. All input field
           types (except B and K) are valid format specifiers. See below
           for the list.


There are two special specifiers for callbacks:

The combination '%/' corresponds to a callback function that will be
called when any of the fields is modified. The callback type is <a class="el" href="kernwin_8hpp.html#a435eebdaa696149cdba8213abf460465" title="Callback.">formchgcb_t</a>.
There can be only one such callback. It corresponds to the first variadic
argument regardless of its exact position in the format string.

The combination '%*' is used to store user data (void *) in the form.
This data can be later retrieved from the <a class="el" href="kernwin_8hpp.html#a435eebdaa696149cdba8213abf460465" title="Callback.">formchgcb_t</a> callback via the
form action method get_ud().

Input fields use the following syntax:

&lt;label:type:width:swidth:@hlp[]&gt;

where
      label - any text string serving as label for the input field
              the label may contain an accelerator key like this: "~O~pen"
              (O is the accelerator key; Alt-O will work too)
      type  - a character specifying type of input field.
              The form() function will perform initial validation of
              value specified by the user and convert it appropriately.
              See table of input field types below. The type can be followed
              by a decimal number, an input field ID.
      width - decimal number specifying the maximum possible number of
              characters that can be entered into the input field
              for X: decimal number specifying size of the buffer
                of characters that can be entered into the input field
                passed for text input fields (including terminating 0).
                if omitted or &lt;0, assumed to be at least MAXSTR
              for B, k: the code generated when the user presses the
                button (passed to the button callback)
              for f (path to file) this attribute specifies the dialog type:
                0-'open file' dialog box
                1-'save file' dialog box
              for F (folder) it is ignored
              for f, F: buffer is assumed to be at least QMAXPATH long
              for b (combobox) this attribute specifies the readonly attribute:
                0   - read-only combobox
                &gt; 0 - editable combobox
              for n, N, D, O, Y, H, M: the width can have a '+' prefix.
                in this case, if the entered value starts with '+' or '-'
                sign, it will be added to or subtracted from the initial
                value. the caller will receive the result of this operation
      swidth -decimal number specifying width of visible part of input field
              this number may be omitted.
              for E, t: decimal number specifying the width of the input area.
                for these types the number cannot be omitted.
                note that the height is calculated automatically
      @hlp[]- help context for the input field. you may replace the
              help context with '::' (two colons) if you don't want to
              specify help context. The help context is a number of help
              page from IDA.HLP file.


Input field types                               va_list parameter
-----------------                               -----------------

q - UTF-8 string                                <a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>*
h - HTML text                                   char * (only for GUI version; only for dynamic labels; no input)
S - segment                                     ::sel_t*
N - hex number, C notation                      <a class="el" href="pro_8h.html#aef265b11f25357d520dcfd40aa8c18f3" title="unsigned value used by the processor.">uval_t</a>*
n - signed hex number, C notation               <a class="el" href="pro_8h.html#a430639fcfd4601cd6cb310ae71481fe1" title="signed value used by the processor.">sval_t</a>*
L - C notation number                           ::uint64*
    (prefix 0x - hex, 0 - octal, otherwise decimal)
l - same as L but with optional sign            ::int64*
M - hex number, no "0x" prefix                  <a class="el" href="pro_8h.html#aef265b11f25357d520dcfd40aa8c18f3" title="unsigned value used by the processor.">uval_t</a>*
D - decimal number                              <a class="el" href="pro_8h.html#a430639fcfd4601cd6cb310ae71481fe1" title="signed value used by the processor.">sval_t</a>*
O - octal number, C notation                    <a class="el" href="pro_8h.html#a430639fcfd4601cd6cb310ae71481fe1" title="signed value used by the processor.">sval_t</a>*
Y - binary number, "0b" prefix                  <a class="el" href="pro_8h.html#a430639fcfd4601cd6cb310ae71481fe1" title="signed value used by the processor.">sval_t</a>*
H - char value, C notation                      <a class="el" href="pro_8h.html#a430639fcfd4601cd6cb310ae71481fe1" title="signed value used by the processor.">sval_t</a>*
$ - address                                     ::ea_t*
i - ident                                       <a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>*
B - button                                      <a class="el" href="kernwin_8hpp.html#ac45b0287a792bd1745fc5cd54a24978b" title="Callback.">buttoncb_t</a>*
k - txt: button (same as B)/gui: hyperlink      <a class="el" href="kernwin_8hpp.html#ac45b0287a792bd1745fc5cd54a24978b" title="Callback.">buttoncb_t</a>*
K - color button                                <a class="el" href="pro_8h.html#a3df5040891132e50157aee66affdf1de" title="background color in RGB">bgcolor_t</a>*
F - path to folder                              char* at least #QMAXPATH size
f - path to file                                char* at least #QMAXPATH size
y - type declaration                            <a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>*
X - command                                     char* at least <a class="el" href="pro_8h.html#a5189100144828825ca4369c28c1261d1" title="maximum string size">MAXSTR</a> size
E - chooser                                     <a class="el" href="structchooser__base__t.html" title="Chooser object. #chooser.">chooser_base_t</a> * - embedded chooser
                                                <a class="el" href="pro_8h.html#a3fb92c6beff4e1e004a4ef5a2e356391" title="vector of sizes">sizevec_t</a> * - in/out: selected lines (0-based)
                                                  selected rows are saved to this array
                                                  for modal forms only
                                                  (NB: this field takes two args)
t - multi line text control                     <a class="el" href="structtextctrl__info__t.html" title="Multi line text control, used to embed a text control in a form.">textctrl_info_t</a> *
b - combobox (dropdown list)                    <a class="el" href="pro_8h.html#a823b67c620f6cdca97e1d969ea4a9b02" title="vector of strings">qstrvec_t</a> * - the list of items
                                                int* or <a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>* - the preselected item
                                                  (<a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>* when the combo is editable, i.e. width field is &gt;0)
p - UTF-8 string                                <a class="el" href="pro_8h.html#a386c10c6aa4340f1d63df85f40454fce" title="regular string">qstring</a>* - echoed as a password field (i.e., with '*' masks)

The M, n, N, D, O, Y, H, $ fields try to parse the input as an IDC expression
and convert the result into the required value type

If the buffer for 'F' field contains filemasks and descriptions like this:
  *.exe|Executable files,*.dll|Dll files
they will be used in the dialog box filter.

The hint message can be specified before the label enclosed in '#':

&lt;#hint message::label:...&gt;

Radiobuttons and checkboxes are represented by:

&lt;label:type&gt;
&lt;label:type&gt;&gt;         - end of block

where valid types are C and R
(you may use lowercase 'c' and 'r' if you need to create two radiobutton
or checkbox groups on the same lines). The field ID of the whole group
can be specified between the brackets: &lt;label:type&gt;ID&gt;

field types           va_list parameter
-----------           -----------------

C - checkbox          ushort*                 bit mask of checkboxes
R - radiobutton       ushort*                 number of radiobutton

The group box title and hint messages can be specified like this:

&lt;#item hint[#group box title[#group box hint]]#label:type&gt;

The group box title and the group box hint can be specified only in the
first item of the box. If the item hint doesn't exist, it should be
specified as an empty hint (##title##).
The subsequent items can have an item hint only:

&lt;#item hint::label:type&gt;

Initial values of input fields are specified in the corresponding
input/output parameters (taken from va_list array).

OK, Cancel and (possibly) Help buttons are displayed at the bottom of
the dialog box automatically. Their captions can be changed by the BUTTON
keywords described at the beginning of this page.

Input field definition examples:

 &lt;Kernel analyzer options ~1~:B:0:::&gt;
 &lt;~A~nalysis enabled:C&gt;
 &lt;~I~ndicator enabled:C&gt;&gt;
 &lt;Names pre~f~ix  :q:15:15::&gt;
 &lt;~O~utput <a href="file:f:1:64::">file:f:1:64::</a>&gt;
 &lt;~O~utput directory:F::64::&gt;

Resizable fields can be separated by splitters (GUI only).

A vertical splitter is represented by &lt;|&gt;. E.g.,:
  &lt;~Chooser~:E1:0:40:::&gt;&lt;|&gt;&lt;~E~ditor:t2:0:40:::&gt;
whereas a horizontal splitter is represented by &lt;-&gt;. E.g.,:
  &lt;~Chooser~:E1:0:40:::&gt;
  &lt;-&gt;
  &lt;~E~ditor:t2:0:40:::&gt;

It's also possible to organize fields by tabs (GUI only),
by adding a: &lt;=:tab_label&gt; after a series of fields. E.g.,:

  &lt;This is a checkbox:c&gt;&gt;
  &lt;=:Tab with a checkbox&gt;
  
  &lt;=:Tab with numeric input&gt;


</li>
</ul>
</pre></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
